<!DOCTYPE html>
<html>

<head>
    <meta charset="ISO-8859-1">
    <title>Repaso JS</title>
</head>

<body>
    <h1>Repaso JS: Arrays</h1>
    <a href="ejem02_ES6.html">Ir a ecma Script 6</a>
    <script type="text/javascript">
        function Usuario(edad, nombre) {
            this.edad = edad;
            //variable local que enclausuramos en un metodo
            this.nombre = nombre;
            /*var nombre = nombre;
            this.getNombre = function() {
                //enclausuramos porque usamos una variable local externa a la funcion
                //para poder devolverla JS hace que persista en el tiempo
                return nombre;
            }*/
        }

        //para usar encapsulación en javascript se usan clousures (Aunque es ñapa)
        function GestionUsuario() {
            //como en java, usa this para el objeto recien creado
            this.listaUsuarios = new Array();


            this.listarUsuarios = function() {
                for (let i = 0; i < this.listaUsuarios.length; i++) {
                    document.write("<br> - " + this.listaUsuarios[i]);
                }
            }
            this.modificarNombre = function(u, nom) {
                document.write("<br><br>Modificar nombre: ");
                u.nombre = nom;
            }
            this.modificarEdad = function(u, num) {
                document.write("<br><br>Modificar edad: ");
                u.edad = num;
            }
            this.modificarNombreYEdad = function(u, nom, num) {
                document.write("<br><br>Modificar nombre y edad: ");
                u.nombre = nom;
                u.edad = num;

            }

            this.eliminarUsuarios = function(ar) {
                document.write("<br><br>Eliminando usuarios: ");
                while (this.listaUsuarios.length > 0) {
                    this.listaUsuarios.pop();
                }
            }

            this.filtrarEdadConcreta = function(e) {
                document.write("<br><br>Filtrando por edad concreta: " + e);
                for (let i = 0; i < this.listaUsuarios.length; i++) {

                    if (this.listaUsuarios[i].edad == e) {
                        document.write("<br>El Usuario: " + this.listaUsuarios[i].nombre + " tiene " + e +
                            " anios.")
                    }
                }
            }

            this.filtrarEdadRango = function(num1, num2) {
                document.write("<br><br>Filtrando por rango de edad: " + num1 + " - " + num2);
                for (let i = 0; i < this.listaUsuarios.length; i++) {

                    if (this.listaUsuarios[i].edad > num1 && this.listaUsuarios[i].edad < num2) {
                        document.write("<br>El Usuario: " + this.listaUsuarios[i].nombre + " tiene entre " +
                            num1 + " y " + num2 + " anios.")
                    }
                }
            }

        }
        let gesUsu = new GestionUsuario();

        let us = new Usuario(24, "Pablo");
        let us2 = new Usuario(10, "pepe");

        gesUsu.listaUsuarios.push(us);
        gesUsu.listaUsuarios.push(us2);

        gesUsu.filtrarEdadConcreta(24);
        gesUsu.filtrarEdadRango(1, 30);

        gesUsu.modificarNombre(us, "Pepe");
        document.write("<br>El nombre del usuario es: " + us.nombre);
        gesUsu.modificarEdad(us, 15);
        document.write("<br>La edad del usuario es: " + us.edad);
        gesUsu.modificarNombreYEdad(us, "Juanito", 27);
        document.write("<br>El nombre del usuario es: " + us.nombre + " La edad del usuario es: " + us.edad);

        gesUsu.eliminarUsuarios();
        document.write("<br> El tamano del Array es: " + gesUsu.listaUsuarios.length);
    </script>
</body>

</html>